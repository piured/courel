<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Courel</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="https://raw.githubusercontent.com/piured/courel/main/Imgs/Logos/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Courel<span id="projectnumber">&#160;0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('judging-notes.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Judging Notes</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md20">Action time</a></li>
<li class="level1"><a href="#autotoc_md21">Delta time</a></li>
<li class="level1"><a href="#autotoc_md22">Judgment System</a></li>
<li class="level1"><a href="#autotoc_md23">Premature judgment</a></li>
<li class="level1"><a href="#autotoc_md24">Miss judgment</a></li>
<li class="level1"><a href="#autotoc_md25">Hit</a></li>
<li class="level1"><a href="#autotoc_md26">Custom judgments</a></li>
<li class="level1"><a href="#autotoc_md27">Judging holds</a></li>
<li class="level1"><a href="#autotoc_md28">Activeness of holds</a></li>
<li class="level1"><a href="#autotoc_md29">Asking for judgments</a></li>
</ul>
</div>
<div class="textblock"><p>The process of assigning a judgment to a note based on the user's input is called judging. <a class="el" href="namespaceCourel.html">Courel</a> allows developers to define custom jugdments, so you can implement the one that fits best for your game. However, <a class="el" href="namespaceCourel.html">Courel</a> needs to know when a note has been judged positively, has been missed, or the action is premature in order to keep its internal state consistent.</p>
<p>The judgment of notes is produced when a note approaches the receptor and the user actions it with the right timing and input event. The place where the receptor is placed (at position 0 w.r.t. the scrolling axis) is called the judgment row.</p>
<p><img src="https://raw.githubusercontent.com/piured/courel/main/Imgs/Tutorial/judging-row.png" alt="Fav gimmicks" width="500" style="display: block; margin: 0 auto; text-align: center;" class="inline"/></p>
<p>At first glance, it might seem reasonable to use the absolute position of a note to determine how good or bad the judgment should be: the further away a note is w.r.t. to the receptor the worse the judgment would be, and the closest the better. This would be kind of acceptable if we did not have any gimmick that could modify the positioning of the notes during runtime (e.g. see Scrolls and Speeds gimmicks). <a class="el" href="namespaceCourel.html">Courel</a> sorts out this problem by assigning to each <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1SingleNote.html">SingleNote</a> a \(v\) value: the action time.</p>
<h1><a class="anchor" id="autotoc_md20"></a>
Action time</h1>
<p>The action time \(v\) of a note is the exact time when a note is expected to be actioned by the user w.r.t. the song time, and luckily is invariant to its absolute position. It is calculated w.r.t. the beat a note is placed at and all the gimmicks that affect the various time spaces of the sequencer. The \(v\) value lives in the exact same space as the song time \(t\), so it is measured in seconds and can be compared to it. You can query the \(v\) value of a note via the <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1SingleNote.html#a51c4b3681f045b782bf6ca27787a7f30">VBegin</a> method, although you will not need to access it directly in most situations.</p>
<h1><a class="anchor" id="autotoc_md21"></a>
Delta time</h1>
<p>What you most likely need to use is the delta time of a note w.r.t. to an input event. The delta time of a note is the difference between the action time \(v\) of the note and the song time \(t\) when an input event is produced. The delta time has the following properties:</p>
<ul>
<li>It is negative when a note is actioned <b>before</b> its action time,</li>
<li>positive when it is actioned after its action time,</li>
<li>and zero when the note is actioned just at its action time.</li>
</ul>
<p>This means that the lower the delta time, the closer is the user's action to the right timing. In all rhythm games that I know of, this translates into better judgments.</p>
<h1><a class="anchor" id="autotoc_md22"></a>
Judgment System</h1>
<p>The native judgment system that <a class="el" href="namespaceCourel.html">Courel</a> provides allows informing the sequencer when a note has been hit (or customly judged), has been missed, or its premature to produce a judgment. Any custom judgment system must derivate from <a class="el" href="classCourel_1_1Judge_1_1Judgment.html">Judgment</a> to provide at least the same functionality. This is enforced by the use of the <a class="el" href="interfaceCourel_1_1Judge_1_1IJudge.html">IJudge</a> interface.</p>
<p><a class="el" href="namespaceCourel.html">Courel</a> is only needs to be aware of three judgment outcomes to operate properly. For explaination purposes only, in the following examples we will use the distance of notes w.r.t. to the receptor in the scrolling axis as mean to determine the judgment, but remember that this is not the way <a class="el" href="namespaceCourel.html">Courel</a> does it.</p>
<p><img src="https://raw.githubusercontent.com/piured/courel/main/Imgs/Tutorial/judge-areas.png" alt="Fav gimmicks" width="400" style="display: block; margin: 0 auto; text-align: center;" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md23"></a>
Premature judgment</h1>
<p>A premature judgment is produced when a note is actioned way before its action time. So before, that we cannot even tell if the user is trying to action the note or not. You can see the blue tap note in the picure above as an example. In such case, the <a class="el" href="classCourel_1_1Judge_1_1Judgment.html#a5989c0ccc07874e60a97d22aebefd006">Premature</a> property must be set to true. When a premature judgment is produced, <a class="el" href="namespaceCourel.html">Courel</a> will not notify subscribers of the event, and the note can be asked to be judged again normally later on. In short, a premature judgment does not alter the state of the sequencer.</p>
<h1><a class="anchor" id="autotoc_md24"></a>
Miss judgment</h1>
<p>When a note goes past the judgment row without being actioned, it is considered a miss in most rhythm games (such as the red tap note in the picture above). To inform the sequencer that a note has been missed, <a class="el" href="classCourel_1_1Judge_1_1Judgment.html#a5fbe5cb3b25a5c411ed6a3eac5f5d263">Miss</a> property must be set to true. In such situation, <a class="el" href="namespaceCourel.html">Courel</a> will notify subscribers of the event, and the note won't be asked to be judged again.</p>
<h1><a class="anchor" id="autotoc_md25"></a>
Hit</h1>
<p>In most rhythm games, a note is hit when it is actioned at the right timing. Most of the times, we define an area around the receptor where notes can be hit (but at the end of the day this is up to the designer of the game). The closer the note to the recepor, the better the timing was, and therefore the better the judgment (in whatever scale you use). Recall that determining the judgment is made through the delta time, not the actual distance between the note and the receptor. You can see the hit area in the picture above, where a yellow tap note can be seen.</p>
<p>To inform the sequncer that a note has been hit, <a class="el" href="classCourel_1_1Judge_1_1Judgment.html#a5989c0ccc07874e60a97d22aebefd006">Premature</a> and <a class="el" href="classCourel_1_1Judge_1_1Judgment.html#a5fbe5cb3b25a5c411ed6a3eac5f5d263">Miss</a> properties must be set to false. In such situation, <a class="el" href="namespaceCourel.html">Courel</a> will notify subscribers of the event, and the note won't be asked to be judged again.</p>
<h1><a class="anchor" id="autotoc_md26"></a>
Custom judgments</h1>
<p>The judgment system in <a class="el" href="namespaceCourel.html">Courel</a> is extensible to custom judgments. Custom judgments will most likely target the hit area. Declare your judgment class by derivate from <a class="el" href="classCourel_1_1Judge_1_1Judgment.html">Judgment</a> and implement the <a class="el" href="interfaceCourel_1_1Judge_1_1IJudge.html">IJudge</a> interface accordingly. As we well see later on, notes can be asked their judgment (therefore your custom judgments) when notified to subscribers. Beware, the native judgment system must be preserved, so you must always set the <a class="el" href="classCourel_1_1Judge_1_1Judgment.html#a5989c0ccc07874e60a97d22aebefd006">Premature</a> and <a class="el" href="classCourel_1_1Judge_1_1Judgment.html#a5fbe5cb3b25a5c411ed6a3eac5f5d263">Miss</a> properties accordingly.</p>
<h1><a class="anchor" id="autotoc_md27"></a>
Judging holds</h1>
<p>Holds are not judged per se. As reviewed before, <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1Hold.html">Hold</a>s are always mapped to <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1SingleNote.html">SingleNote</a>s, and that is what you actually judge as far as notes are concerned.</p>
<p>However, the tail of a hold is asked to be judged w.r.t. the end action time \(v\). The end action time of a hold is the action time of the hold at the end of its life.</p>
<h1><a class="anchor" id="autotoc_md28"></a>
Activeness of holds</h1>
<p>There is another aspect of holds that is somewhat judged: its activeness. The activeness of a hold is a property that determines if a hold is active or not. An active hold can be reacted to it, and an inactive hold cannot. You can also think of an inactive hold as a hold that has been missed. For example, holds in DDR are missed when the user releases the hold before the end of its life, or in <a class="el" href="namespaceCourel.html">Courel</a> terminology, become inactive.</p>
<p>To determine the activennes of holds, specially for <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1DdrStyleHold.html">DdrStyleHold</a> and <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1DdrStyleRollHold.html">DdrStyleRollHold</a>, it is useful to check out the methods <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1DdrStyleHold.html#a18760715f45d505eeabad294b5430f84">GetElapsedtimeInactive</a> and <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1DdrStyleRollHold.html#ab928108450b7f9e75585021244660a79">GetElapsedTimeActive</a>. They return the elapsed time in seconds since the hold was last held or released, respectively. You can use a threshold to establish a criterion do determine if a hold is active or not. <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1PiuStyleHold.html">PiuStyleHold</a>s, at least in the original Pump It Up arcade, are always active (you can hit them anytime).</p>
<h1><a class="anchor" id="autotoc_md29"></a>
Asking for judgments</h1>
<p><a class="el" href="namespaceCourel.html">Courel</a> asks for judgments through an instance of a class derivate from <a class="el" href="interfaceCourel_1_1Judge_1_1IJudge.html">IJudge</a> when appropiate. This class must be implemented appropiately by the user of <a class="el" href="namespaceCourel.html">Courel</a>, and it is passed to and existing <a class="el" href="classCourel_1_1Sequencer.html">Sequencer</a> instance via the <a class="el" href="classCourel_1_1Sequencer.html#aec279da20cd09b3ea2ced76b48e3784c">SetIJudge</a> method. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
