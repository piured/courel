<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Courel</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="https://raw.githubusercontent.com/piured/courel/main/Imgs/Logos/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="https://raw.githubusercontent.com/piured/courel/main/Imgs/Logos/courel-logo-only.png"/></td>
  <td id="projectalign">
   <div id="projectname">Courel<span id="projectnumber">&#160;0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('drawing-and-scrolling-notes.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Drawing and Scrolling Notes</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md17">Reference value: the unitary value</a></li>
<li class="level1"><a href="#autotoc_md18">Relative and absolute position</a></li>
<li class="level1"><a href="#autotoc_md19">Scrolling notes</a></li>
</ul>
</div>
<div class="textblock"><p>So far we have already covered the basics of the notes, score, and gimmicks. Both setting the notes in the score (by assigning to each one of them a beat and lane) and setting up all the gimmicks is just enough to determine where each note should be placed on the scrolling axis at any song time \(t\), as well as when they should be actioned by the user. Calculating these values goes out of the scope of this manual, but as said earlier, if you wanna have a look at the math behind it, you can learn more <a class="el" href="the-math-behind-gimmicks.html#positioning-and-scrolling-notes">here</a></p>
<p><a class="el" href="namespaceCourel.html">Courel</a> is just a sequencer, so it does not provide any means to draw the notes on the screen, or to scroll them. It is up to the end user to implement this. What <a class="el" href="namespaceCourel.html">Courel</a> will give you though is all the values you need to do it.</p>
<h1><a class="anchor" id="autotoc_md17"></a>
Reference value: the unitary value</h1>
<p><a class="el" href="namespaceCourel.html">Courel</a> assumes the following spatial properties for the game objects of the rhythm game:</p>
<p><img src="https://raw.githubusercontent.com/piured/courel/main/Imgs/Tutorial/unitary-value-scrolling-axis.png" alt="Fav gimmicks" width="200" style="display: block; margin: 0 auto; text-align: center;" class="inline"/></p>
<p>The scrolling axis (shown as a dotted vertical line) is a virtual line which represents the path taken by the notes as they scroll w.r.t. to the song time towards the receptor (more on this later on). This axis can be placed anywhere in the screen, and it can be oriented in any direction. That is up to the designer of the game. You can think of DDR having the scrolling axis from bottom to top, so the notes scroll upwards when the song time increases, or Tycho having it from left to right.</p>
<ul>
<li>What is important is that the size of the note aligned with the scrolling axis is assumed to be one unit. This is what we refer to as the unitary value. In the example above you can see that the height of gray bounding box around the note is of size one.</li>
<li>Another assumption made by <a class="el" href="namespaceCourel.html">Courel</a> is that notes that are one beat apart from each other, will be positioned one unit apart in the scrolling axis, as seen below.</li>
</ul>
<p><img src="https://raw.githubusercontent.com/piured/courel/main/Imgs/Tutorial/unitary-spacing-scrolling-axis.png" alt="Fav gimmicks" width="200" style="display: block; margin: 0 auto; text-align: center;" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md18"></a>
Relative and absolute position</h1>
<p>Once you have loaded a chart through the method <a class="el" href="classCourel_1_1Sequencer.html#ac53592777ed26f2aac4fc0ccc358333b">LoadChart</a> in the <a class="el" href="classCourel_1_1Sequencer.html">Sequencer</a> class, <a class="el" href="namespaceCourel.html">Courel</a> reads the notes and gimmicks, and updates the internal properties of the notes in the score. The next time you query the notes to be drawn in the screen via the <a class="el" href="classCourel_1_1Sequencer.html#a2f5bdf20f6d808f262cb898f9411abd3">GetDrawableNotes</a>, these properties can be used to determine the position of the notes in the scrolling axis.</p>
<p>The most important property is the \(w\) value, which can be queried via the <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1Note.html#a51d5110d94aa7ba7acd88309591030ec">WBegin</a> method in any <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1Note.html">Note</a> class (holds have two \(w\) values &ndash; <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1Hold.html#a6b31bbbeba6e2692d63fbcaf4165d0e1">WBegin</a> and <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1Hold.html#abae931763f587b4126b03c66898c09aa">WEnd</a>). We called it \(w\) just to keep it consistent with the equations behind it. \(w\) is referred to as the relative position.</p>
<p>The <b>relative position</b> of a note is the position the note must be drawn in the scrolling axis when the song time \(t=0\). Obviously, this value alone is not very useful, because it does not tell us where the note must be drawn at any other song time.</p>
<p>The position of a note in the scrolling axis at any given song time \(t\) is referred to as its <b>absolute position</b>. <a class="el" href="namespaceCourel.html">Courel</a> does not calculate this value for every note for you due to performance reasons &ndash; most of the time you will be culling pretty much all of the drawable notes, so you do not need to calculate these values for all them. Instead, it provides you with the values you need to calculate it yourself.</p>
<p>The absolute position of a note can be calculated by quering the current scroll \(c\) and speed \(s\) values (via <a class="el" href="classCourel_1_1Sequencer.html#af6892c77a23afa281a8ae0e6ca3e10c5">GetScroll</a> and <a class="el" href="classCourel_1_1Sequencer.html#ac0d2e3b35c34ca602f8e67d10af46545">GetSpeed</a> methods), and the relative position \(w\) of the note. The equation is the following:</p>
<p class="formulaDsp">
\[
\text{Absolute position} = (-w + c) \times s\,.
\]
</p>
<p>Since \(c\) and \(s\) are function of \(t\), the absolute position of the note will change as the song time progresses.</p>
<h1><a class="anchor" id="autotoc_md19"></a>
Scrolling notes</h1>
<p>The calculus of the absolute position must be done at every frame (in your <code>Update</code> method, for example). By doing so and updating your game object position transform in the scrolling axis accordingly, you will be scrolling them at the right pace. Just as simple as that. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
