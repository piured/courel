<!-- HTML header for doxygen 1.9.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Courel</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="https://raw.githubusercontent.com/piured/courel/main/Imgs/Logos/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="https://raw.githubusercontent.com/piured/courel/main/Imgs/Logos/courel-logo-only.png"/></td>
  <td id="projectalign">
   <div id="projectname">Courel<span id="projectnumber">&#160;0.0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('sequencer-events.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Sequencer Events</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md30">Missed notes on Row</a></li>
<li class="level1"><a href="#autotoc_md31">SingleNotes passing the judgment row</a></li>
<li class="level1"><a href="#autotoc_md32">Active holds in action range</a></li>
<li class="level1"><a href="#autotoc_md33">Hold reaches end of lifetime</a></li>
<li class="level1"><a href="#autotoc_md34">SingleNote is judged</a></li>
<li class="level1"><a href="#autotoc_md35">Hold becomes inactive</a></li>
<li class="level1"><a href="#autotoc_md36">Rolling back notes</a></li>
<li class="level1"><a href="#autotoc_md37">Rolling back SingleNotes</a></li>
<li class="level1"><a href="#autotoc_md38">Partially rolling back Holds</a></li>
<li class="level1"><a href="#autotoc_md39">Hold is rolled back completely</a></li>
</ul>
</div>
<div class="textblock"><p>Events are the way <a class="el" href="namespaceCourel.html">Courel</a> communicates with the outer world to notify something relevant has happened during runtime, allowing you to react to it accordingly. You subscribe to sequencer events by implementing the interface <a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html">ISubscriber</a> and passing an instance of it to the <a class="el" href="classCourel_1_1Sequencer.html#a6c65c431414e209de67047f716d42e99">AddSubscriber</a> method. You can pass as many subscribers as you want, and all of them will be notified when an event occurs.</p>
<p>In the following sections we will review the events that <a class="el" href="namespaceCourel.html">Courel</a> can notify to subscribers.</p>
<h1><a class="anchor" id="autotoc_md30"></a>
Missed notes on Row</h1>
<p><a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html#aeda7120786905ddd892d76db833862b4">OnMissedSingleNotesOnRow</a> event is triggered as soon as any <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1SingleNote.html">SingleNote</a> in a row has been judged as miss. Remember that missed notes are dependant on your implementation of <a class="el" href="interfaceCourel_1_1Judge_1_1IJudge.html">IJudge</a>. The event is triggered only once per each row. If a row is rolled back, the same row can trigger the event again.</p>
<p>Use this event for example to break the combo, trigger a miss tween, or play a sound effect.</p>
<h1><a class="anchor" id="autotoc_md31"></a>
SingleNotes passing the judgment row</h1>
<p><a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html#ab5a82be6c692d19f08864b0f1371fe28">OnHoveringReceptorSingleNotes</a> is triggered as soon as the action time \(v\) of notes in a row is equal to the song time \(t\) (by definition, all notes in the same row have the same action time \(v\)). This means that this method is called when the notes are expected to be actioned for the user. The event is triggered only once per each row. If a row is rolled back, the same row can trigger the event again.</p>
<p>Use this event for example to assist the player with timing by playing a clap sound effect.</p>
<h1><a class="anchor" id="autotoc_md32"></a>
Active holds in action range</h1>
<p><a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html#a8ddaba35840b3987a39e55a3a30e9cdf">OnActiveHold</a> is triggered when a hold is in action range and active. Recall that a hold is active when it can be reacted to, and that it is part of the judging system to assess the activeness of a hold.</p>
<p>The <b>action range</b> of a hold though, is defined as the difference between the action time \(v\) of the hold and the end action time \(v\) of the hold. We say that a hold is in action range when the song time \(t\) is greater or equal to the action time and less or equal to the end action time. In other words, this method is called when the hold is expected to be held by the user, as long as it is active.</p>
<p>This event is triggered multiple times per hold (per each Update call at the sequencer), as long as the hold is in action range and active. If a hold is rolled back, the same hold can trigger the event again.</p>
<p>Use this event for example to reposition the head of the note in the screen. When the hold is being held, the head of the hold is usually placed so it hovers the receptor in order to indicate the user that the hold is being held.</p>
<h1><a class="anchor" id="autotoc_md33"></a>
Hold reaches end of lifetime</h1>
<p><a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html#ab26b0b868ab5dff71648cad47eb77d06">OnHoldEnded</a> is called when a hold is active and has reached its end action time w.r.t. the song time \(t\). This means that the hold is expected to be released by the user. This method is called only once per hold. If a hold is rolled back, the same hold can trigger the event again. Beware that this method can be called even though the hold is not being held.</p>
<p>If you need to asses the end of a hold, use (<a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html#a50a51e10b36e85e9d7f259827f4af47d">Courel.Subscription.ISubscriber.OnHoldEndJudged</a>) instead.</p>
<p>This event can be used for instance to create a visual effect when the hold is completed (like in DDR, the "O.K." toast).</p>
<h1><a class="anchor" id="autotoc_md34"></a>
SingleNote is judged</h1>
<p><a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html#a9ba5311e4e64466c4a333d9317e927f3">OnJudgedSingleNoteOnRow</a> is arguably the most important event to attend to is this one. This method is called when a note has been judged as a hit (i.e. judged as not premature and not missed). This method is called only once per note, but multple times per row. If a row is rolled back, the same note can trigger the event again.</p>
<p>This event is mostly used to update increment the combo count, show a judgment animation, remove notes from the scene, etc. You can access the judgment of the note via the <a class="el" href="classCourel_1_1Loader_1_1Notes_1_1Note.html#ac613b53722e4f4fbddf38509880ee63b">Judgment</a> method. As most rthythm games evaluate w.r.t. all the notes in a row being judged, this method also provides the row where the note is placed. Check the methods of <a class="el" href="classCourel_1_1ScoreComposer_1_1Row.html">Row</a>, some of them might be useful to you.</p>
<h1><a class="anchor" id="autotoc_md35"></a>
Hold becomes inactive</h1>
<p><a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html#ae774c1c332dcc744e35963c02387929c">OnHoldInactive</a> is called when an active hold and has become inactive. This means that the hold has been missed, or in <a class="el" href="namespaceCourel.html">Courel</a> terminology, has been released before the end of its life. This method is called only once per hold. If a hold is rolled back (or partially rolled back), the same hold can trigger the event again.</p>
<p>This event is mostly used to visually indicate the user that the hold has been missed and cannot be actioned anymore.</p>
<h1><a class="anchor" id="autotoc_md36"></a>
Rolling back notes</h1>
<p>Before diving into the roll back events, it is worth clarifying when notes are rolled back. When using the sequencer in a regular set-up scenario, the song time \(t\) increases over time. As the song progresses, you draw the notes in the screen accordingly to their absolute position, and you attend to the events that <a class="el" href="namespaceCourel.html">Courel</a> notifies to you to keep your game's visuals consistent.</p>
<p><a class="el" href="namespaceCourel.html">Courel</a> also allows the song time \(t\) to decrease over time at any given song time. When this happens, all previous notes that have been judged until the new song time need to be reset and sorted out in the score so they can be judged again. Putting notes back into the score is what we call rolling back notes.</p>
<p><a class="el" href="namespaceCourel.html">Courel</a> notifies you when notes are rolled back so you can react to it accordingly. Most rhythm games remove notes from the scene (or cull them) as soon as they are judged, or go out of the screen. When notes are rolled back, it is likely that you will need to put them back into the scene so the user can interact with them again.</p>
<p><a class="el" href="namespaceCourel.html">Courel</a>'s rolling back capabilities allow to create e.g. training sessions on certain parts of a chart that are difficult for the player without needing to restart the song from the beginning. (Although this is something you need to implement yourself).</p>
<h1><a class="anchor" id="autotoc_md37"></a>
Rolling back SingleNotes</h1>
<p><a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html#a4c2e03fe631b984e0c04ff1e3e9a6850">OnRolledBackSingleNotesOnRow</a> is called when all notes in a row are rolled back. It is called only once per each row when rolling back.</p>
<p>This method is mostly used to redraw the notes on the screen.</p>
<h1><a class="anchor" id="autotoc_md38"></a>
Partially rolling back Holds</h1>
<p><a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html#a26c0f0fe52bd438b6fc658d53ebd837e">OnHoldIsPartiallyRolledBack</a> is called at each <code>Update</code> call until a hold is completely rolled back. A hold is partially rolled back when the new song time \(t\) is in the hold's action range.</p>
<p>This method is mostly used to redraw the hold in the screen, and position is head accordingly.</p>
<h1><a class="anchor" id="autotoc_md39"></a>
Hold is rolled back completely</h1>
<p>Unlike the event <a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html#a26c0f0fe52bd438b6fc658d53ebd837e">OnHoldIsPartiallyRolledBack</a>, <a class="el" href="interfaceCourel_1_1Subscription_1_1ISubscriber.html#a3027154b7555feac6b69ce4324b36522">OnHoldIsRolledBack</a> is called only once per hold when the hold is completely rolled back, i.e. when the new song time \(t\) is before the action time of the hold.</p>
<p>This method is also mostly used to redraw the hold in the screen, and position is head accordingly. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
